# 后端配置说明

## 📌 重要：必须配置后端地址才能登录

目前登录功能已经完成，但需要配置后端API地址才能正常使用。

---

## 🔧 配置步骤

### 1. 获取 Vercel 部署地址

你的原项目 `tangzai-zhushou-1105` 应该已经部署在 Vercel 上了。

**获取地址的方法：**

1. 访问 [Vercel Dashboard](https://vercel.com/dashboard)
2. 登录你的账号
3. 找到 `tangzai-zhushou-1105` 项目
4. 点击进入项目详情
5. 复制项目的部署地址，格式类似：
   ```
   https://tangzai-zhushou-1105.vercel.app
   ```

### 2. 修改配置文件

打开文件：`utils/config.js`

找到第 13 行，将 `apiBaseUrl` 修改为你的 Vercel 地址：

```javascript
// 修改前
apiBaseUrl: 'https://your-project.vercel.app',

// 修改后（示例）
apiBaseUrl: 'https://tangzai-zhushou-1105.vercel.app',
```

**注意：** 
- 不要添加 `/api` 后缀
- 确保使用 `https://` 开头
- 生产环境（第 22 行）也要修改

### 3. 保存并重启项目

1. 保存 `utils/config.js` 文件
2. 在 HBuilderX 中重新编译项目
3. 刷新微信开发者工具

---

## 🌐 CORS 跨域配置（可能需要）

如果你在登录时遇到跨域错误（CORS error），需要在后端配置允许跨域。

### Next.js 项目配置 CORS

在你的 `tangzai-zhushou-1105` 项目中：

1. 打开 `next.config.js`
2. 添加以下配置：

```javascript
module.exports = {
  async headers() {
    return [
      {
        source: '/api/:path*',
        headers: [
          { key: 'Access-Control-Allow-Origin', value: '*' },
          { key: 'Access-Control-Allow-Methods', value: 'GET,POST,PUT,DELETE,OPTIONS' },
          { key: 'Access-Control-Allow-Headers', value: 'Content-Type, Authorization' },
        ],
      },
    ]
  },
}
```

3. 提交并重新部署到 Vercel

---

## ✅ 测试登录

配置完成后，在微信开发者工具中：

1. 打开登录页面
2. 输入用户名和密码
3. 点击登录
4. 打开控制台查看日志

**成功的日志示例：**
```
开始登录，用户名: admin
登录成功，响应数据: {token: "...", user: {...}}
Token已保存
用户信息已保存: {...}
```

**失败的日志示例：**
```
请求失败 400: 用户名或密码错误
```

---

## 🐛 常见问题

### Q1: 提示"网络请求失败"
**原因：** 后端地址配置错误或后端未启动

**解决：**
1. 检查 `utils/config.js` 中的地址是否正确
2. 访问浏览器打开该地址，确认后端可访问
3. 确认 Vercel 项目正常运行

### Q2: 提示"CORS error"
**原因：** 后端未配置跨域

**解决：**
1. 按照上面的 CORS 配置步骤操作
2. 重新部署 Vercel 项目

### Q3: 提示"401 Unauthorized"
**原因：** 用户名或密码错误

**解决：**
1. 确认使用的是正确的测试账号
2. 检查数据库中是否有该用户

### Q4: 不知道测试账号
**解决：**
1. 查看原项目数据库
2. 或者使用注册功能创建新账号（Day 5 会实现）
3. 或者直接在数据库中创建测试用户

---

## 📝 后续优化（Day 3 完成后）

Day 4 开始，我们会：
1. 创建主页框架
2. 实现底部导航栏
3. 实现卡片列表展示

但首先要确保登录功能正常工作！

---

## 💡 提示

如果你希望先跳过后端配置，可以：
1. 继续使用模拟登录（临时方案）
2. 等到 Day 10 再统一配置后端连接

但建议现在就配置好，这样可以边开发边测试真实功能！
