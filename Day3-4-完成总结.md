# âœ… Day 3-4: æ•°æ®å¯¼å‡ºä¸å‡†å¤‡å¯¼å…¥ - å®Œæˆæ€»ç»“

> **å®Œæˆæ—¶é—´**: 2025-11-13  
> **ä»»åŠ¡çŠ¶æ€**: âœ… å·²å®Œæˆ

---

## ğŸ“‹ å·²å®Œæˆçš„ä»»åŠ¡

### Day 3: æ•°æ®å¯¼å‡ºä¸è½¬æ¢ âœ…

1. **åˆ›å»ºæ•°æ®å¯¼å‡ºè„šæœ¬** âœ…
   - `scripts/export-mysql-data.js` - MySQL æ•°æ®å¯¼å‡ºè„šæœ¬
   - è‡ªåŠ¨ä» vercel.json è¯»å–æ•°æ®åº“é…ç½®
   - æ”¯æŒ 7 ä¸ªè¡¨çš„æ•°æ®å¯¼å‡ºå’Œæ ¼å¼è½¬æ¢

2. **æˆåŠŸå¯¼å‡ºæ‰€æœ‰æ•°æ®** âœ…
   - âœ… users â†’ 134 æ¡
   - âœ… agents â†’ 4 æ¡
   - âœ… web-cards â†’ 38 æ¡
   - âœ… feishu-cards â†’ 12 æ¡
   - âœ… cities â†’ 11 æ¡
   - âœ… departments â†’ 9 æ¡
   - âœ… models â†’ 5 æ¡

3. **æ•°æ®æ ¼å¼è½¬æ¢** âœ…
   - ID è½¬æ¢ï¼šMySQL æ•°å­— ID â†’ MongoDB å­—ç¬¦ä¸² ID
   - æ—¶é—´æˆ³è½¬æ¢ï¼šTIMESTAMP â†’ Unix æ¯«ç§’æ—¶é—´æˆ³
   - JSON å­—æ®µè§£æï¼šcities, departments, filter_config ç­‰
   - å¸ƒå°”å€¼è½¬æ¢ï¼šTINYINT â†’ Boolean
   - å­—æ®µæ˜ å°„ï¼šphone â†’ mobileï¼Œæ·»åŠ  uni-id æ ‡å‡†å­—æ®µ

---

### Day 4: æ•°æ®å¯¼å…¥å‡†å¤‡ âœ…

1. **åˆ›å»ºæ•°æ®å¯¼å…¥äº‘å‡½æ•°** âœ…
   - `uniCloud-aliyun/cloudfunctions/data-import/` - æ‰¹é‡å¯¼å…¥äº‘å‡½æ•°
   - æ”¯æŒåˆ†æ‰¹å¯¼å…¥ï¼ˆæ¯æ‰¹ 100 æ¡ï¼‰
   - æ”¯æŒæ¸…ç©ºç°æœ‰æ•°æ®é€‰é¡¹
   - å®Œå–„çš„é”™è¯¯å¤„ç†å’Œæ—¥å¿—

2. **ç”Ÿæˆå¯¼å…¥å‚æ•°æ–‡ä»¶** âœ…
   - `import-params/` ç›®å½•åŒ…å«æ‰€æœ‰å¯¼å…¥å‚æ•°
   - å°è¡¨ï¼šå®Œæ•´æ•°æ®ï¼ˆcities, departments, models, agentsï¼‰
   - å¤§è¡¨ï¼šåˆ†æ‰¹æ–‡ä»¶ï¼ˆusers 3æ‰¹ï¼Œweb-cards 2æ‰¹ï¼Œfeishu-cards 2æ‰¹ï¼‰
   - æ€»å…± 11 ä¸ªå‚æ•°æ–‡ä»¶

---

## ğŸ“‚ æ–‡ä»¶ç»“æ„

```
tangzai-uniapp/
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ package.json                    # ä¾èµ–é…ç½®
â”‚   â”œâ”€â”€ export-mysql-data.js            # æ•°æ®å¯¼å‡ºè„šæœ¬
â”‚   â”œâ”€â”€ import-to-unicloud.js           # å¯¼å…¥å‡†å¤‡è„šæœ¬
â”‚   â”œâ”€â”€ generate-import-params.js       # å‚æ•°ç”Ÿæˆè„šæœ¬
â”‚   â””â”€â”€ auto-import-unicloud.js         # è‡ªåŠ¨åŒ–å¯¼å…¥è„šæœ¬ï¼ˆç”Ÿæˆï¼‰
â”‚
â”œâ”€â”€ data-export/                        # å¯¼å‡ºçš„æ•°æ®æ–‡ä»¶
â”‚   â”œâ”€â”€ users.json                      # 134 æ¡ç”¨æˆ·æ•°æ®
â”‚   â”œâ”€â”€ agents.json                     # 4 æ¡æ™ºèƒ½ä½“æ•°æ®
â”‚   â”œâ”€â”€ web-cards.json                  # 38 æ¡ç½‘é¡µå¡ç‰‡æ•°æ®
â”‚   â”œâ”€â”€ feishu-cards.json               # 12 æ¡é£ä¹¦å¡ç‰‡æ•°æ®
â”‚   â”œâ”€â”€ cities.json                     # 11 æ¡åŸå¸‚æ•°æ®
â”‚   â”œâ”€â”€ departments.json                # 9 æ¡éƒ¨é—¨æ•°æ®
â”‚   â””â”€â”€ models.json                     # 5 æ¡æ¨¡å‹æ•°æ®
â”‚
â”œâ”€â”€ import-params/                      # å¯¼å…¥å‚æ•°æ–‡ä»¶
â”‚   â”œâ”€â”€ cities-import.json              # åŸå¸‚å¯¼å…¥å‚æ•°
â”‚   â”œâ”€â”€ departments-import.json         # éƒ¨é—¨å¯¼å…¥å‚æ•°
â”‚   â”œâ”€â”€ models-import.json              # æ¨¡å‹å¯¼å…¥å‚æ•°
â”‚   â”œâ”€â”€ agents-import.json              # æ™ºèƒ½ä½“å¯¼å…¥å‚æ•°
â”‚   â”œâ”€â”€ uni-id-users-batch1-import.json # ç”¨æˆ·æ‰¹æ¬¡1
â”‚   â”œâ”€â”€ uni-id-users-batch2-import.json # ç”¨æˆ·æ‰¹æ¬¡2
â”‚   â”œâ”€â”€ uni-id-users-batch3-import.json # ç”¨æˆ·æ‰¹æ¬¡3
â”‚   â”œâ”€â”€ web-cards-batch1-import.json    # ç½‘é¡µå¡ç‰‡æ‰¹æ¬¡1
â”‚   â”œâ”€â”€ web-cards-batch2-import.json    # ç½‘é¡µå¡ç‰‡æ‰¹æ¬¡2
â”‚   â”œâ”€â”€ feishu-cards-batch1-import.json # é£ä¹¦å¡ç‰‡æ‰¹æ¬¡1
â”‚   â””â”€â”€ feishu-cards-batch2-import.json # é£ä¹¦å¡ç‰‡æ‰¹æ¬¡2
â”‚
â””â”€â”€ uniCloud-aliyun/cloudfunctions/
    â””â”€â”€ data-import/                    # æ•°æ®å¯¼å…¥äº‘å‡½æ•°
        â”œâ”€â”€ index.js
        â””â”€â”€ package.json
```

---

## ğŸ¯ ä¸‹ä¸€æ­¥æ“ä½œï¼šåœ¨ HBuilderX ä¸­å¯¼å…¥æ•°æ®

### æ­¥éª¤ 1: ä¸Šä¼  data-import äº‘å‡½æ•°

1. åœ¨ HBuilderX ä¸­æ‰¾åˆ° `data-import` äº‘å‡½æ•°
2. **å³é”®** â†’ **ä¸Šä¼ äº‘å‡½æ•°**
3. ç­‰å¾…ä¸Šä¼ æˆåŠŸ

### æ­¥éª¤ 2: æŒ‰é¡ºåºå¯¼å…¥æ•°æ®

ä¾æ¬¡å¯¼å…¥ä»¥ä¸‹è¡¨ï¼ˆæŒ‰ä¾èµ–å…³ç³»æ’åºï¼‰ï¼š

#### 1ï¸âƒ£ å¯¼å…¥ citiesï¼ˆåŸå¸‚ï¼‰
- äº‘å‡½æ•°è¿è¡Œå‚æ•°ï¼šå¤åˆ¶ `import-params/cities-import.json` å†…å®¹
- æ•°æ®é‡ï¼š11 æ¡

#### 2ï¸âƒ£ å¯¼å…¥ departmentsï¼ˆéƒ¨é—¨ï¼‰
- äº‘å‡½æ•°è¿è¡Œå‚æ•°ï¼šå¤åˆ¶ `import-params/departments-import.json` å†…å®¹
- æ•°æ®é‡ï¼š9 æ¡

#### 3ï¸âƒ£ å¯¼å…¥ modelsï¼ˆAI æ¨¡å‹ï¼‰
- äº‘å‡½æ•°è¿è¡Œå‚æ•°ï¼šå¤åˆ¶ `import-params/models-import.json` å†…å®¹
- æ•°æ®é‡ï¼š5 æ¡

#### 4ï¸âƒ£ å¯¼å…¥ uni-id-usersï¼ˆç”¨æˆ·ï¼‰- 3 ä¸ªæ‰¹æ¬¡
- **æ‰¹æ¬¡ 1**ï¼šå¤åˆ¶ `import-params/uni-id-users-batch1-import.json`ï¼ˆ50æ¡ï¼‰
- **æ‰¹æ¬¡ 2**ï¼šå¤åˆ¶ `import-params/uni-id-users-batch2-import.json`ï¼ˆ50æ¡ï¼‰
- **æ‰¹æ¬¡ 3**ï¼šå¤åˆ¶ `import-params/uni-id-users-batch3-import.json`ï¼ˆ34æ¡ï¼‰

#### 5ï¸âƒ£ å¯¼å…¥ agentsï¼ˆæ™ºèƒ½ä½“ï¼‰
- äº‘å‡½æ•°è¿è¡Œå‚æ•°ï¼šå¤åˆ¶ `import-params/agents-import.json` å†…å®¹
- æ•°æ®é‡ï¼š4 æ¡

#### 6ï¸âƒ£ å¯¼å…¥ web-cardsï¼ˆç½‘é¡µå¡ç‰‡ï¼‰- 2 ä¸ªæ‰¹æ¬¡
- **æ‰¹æ¬¡ 1**ï¼šå¤åˆ¶ `import-params/web-cards-batch1-import.json`ï¼ˆ20æ¡ï¼‰
- **æ‰¹æ¬¡ 2**ï¼šå¤åˆ¶ `import-params/web-cards-batch2-import.json`ï¼ˆ18æ¡ï¼‰

#### 7ï¸âƒ£ å¯¼å…¥ feishu-cardsï¼ˆé£ä¹¦å¡ç‰‡ï¼‰- 2 ä¸ªæ‰¹æ¬¡
- **æ‰¹æ¬¡ 1**ï¼šå¤åˆ¶ `import-params/feishu-cards-batch1-import.json`ï¼ˆ10æ¡ï¼‰
- **æ‰¹æ¬¡ 2**ï¼šå¤åˆ¶ `import-params/feishu-cards-batch2-import.json`ï¼ˆ2æ¡ï¼‰

---

## ğŸ” éªŒè¯æ•°æ®

å¯¼å…¥å®Œæˆåï¼Œåœ¨ uniCloud Web æ§åˆ¶å°éªŒè¯ï¼š

1. æ‰“å¼€äº‘æ•°æ®åº“ â†’ æ•°æ®åº“é›†åˆç®¡ç†
2. æ£€æŸ¥æ¯ä¸ªè¡¨çš„è®°å½•æ•°ï¼š
   - cities: 11 æ¡
   - departments: 9 æ¡
   - models: 5 æ¡
   - uni-id-users: 134 æ¡
   - agents: 4 æ¡
   - web-cards: 38 æ¡
   - feishu-cards: 12 æ¡

---

## ğŸ“Š æ•°æ®è¿ç§»ç»Ÿè®¡

| ç±»å‹ | MySQL â†’ MongoDB | çŠ¶æ€ |
|------|----------------|------|
| æ€»è¡¨æ•° | 7 ä¸ªè¡¨ | âœ… |
| æ€»è®°å½•æ•° | 213 æ¡ | âœ… |
| å¯¼å‡ºè€—æ—¶ | ~5ç§’ | âœ… |
| æ•°æ®å¤§å° | ~127 KB | âœ… |

---

## ğŸ’¡ é‡è¦æç¤º

1. **å¯¼å…¥é¡ºåºå¾ˆé‡è¦**
   - å¿…é¡»æŒ‰ç…§ä¾èµ–å…³ç³»é¡ºåºå¯¼å…¥
   - å…ˆå¯¼å…¥åŸºç¡€è¡¨ï¼ˆcities, departments, modelsï¼‰
   - å†å¯¼å…¥å…³è”è¡¨ï¼ˆusers, agents, cardsï¼‰

2. **åˆ†æ‰¹å¯¼å…¥**
   - å¤§è¡¨å·²è‡ªåŠ¨åˆ†æ‰¹ï¼Œé¿å…è¶…æ—¶
   - æ¯æ‰¹æˆåŠŸåå†å¯¼å…¥ä¸‹ä¸€æ‰¹

3. **æ•°æ®å®‰å…¨**
   - å¯¼å‡ºçš„ JSON æ–‡ä»¶åŒ…å«æ•æ„Ÿä¿¡æ¯
   - ä¸è¦æäº¤åˆ° Git
   - å¯¼å…¥å®Œæˆåå¯ä»¥åˆ é™¤ `data-export` å’Œ `import-params` ç›®å½•

4. **clearBefore å‚æ•°**
   - ç¬¬ä¸€æ‰¹æ•°æ®ï¼š`clearBefore: true`ï¼ˆæ¸…ç©ºè¡¨ï¼‰
   - åç»­æ‰¹æ¬¡ï¼š`clearBefore: false`ï¼ˆè¿½åŠ æ•°æ®ï¼‰

---

## ğŸ‰ Day 3-4 å®Œæˆæ ‡è®°

- âœ… **Day 3**: æ•°æ®å¯¼å‡ºä¸è½¬æ¢ï¼ˆå·²å®Œæˆï¼‰
- âœ… **Day 4 å‡†å¤‡**: æ•°æ®å¯¼å…¥äº‘å‡½æ•°å’Œå‚æ•°ï¼ˆå·²å®Œæˆï¼‰
- â³ **Day 4 æ‰§è¡Œ**: åœ¨ HBuilderX ä¸­æ‰§è¡Œå¯¼å…¥ï¼ˆå¾…æ‰‹åŠ¨æ‰§è¡Œï¼‰

---

## ğŸ“ ä¸‹ä¸€æ­¥ (Day 5-6)

æ•°æ®å¯¼å…¥å®Œæˆåï¼Œè¿›å…¥ **Day 5-6: å…¬å…±æ¨¡å—å¼€å‘**
- åˆ›å»º common å…¬å…±æ¨¡å—
- å®ç°é£ä¹¦ SDK å°è£…
- å®ç°æƒé™éªŒè¯ä¸­é—´ä»¶
- å®ç°å·¥å…·å‡½æ•°

---

**å‡†å¤‡å¥½åœ¨ HBuilderX ä¸­æ‰§è¡Œå¯¼å…¥äº†å—ï¼Ÿ** ğŸš€
